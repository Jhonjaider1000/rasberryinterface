(this.webpackJsonprasberryfront=this.webpackJsonprasberryfront||[]).push([[0],{107:function(e,t,n){e.exports=n(148)},112:function(e,t,n){},144:function(e,t){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),c=(n(112),n(94)),l=n(21),s=n(22);function u(){var e=Object(l.a)(["    \n    .hv-100{\n        height: 100vh;\n    }\n    .display-block{\n      display: block;\n    }\n    button{\n      border: none !important;\n    }    \n"]);return u=function(){return e},e}var d=Object(s.a)(u()),m=n(85),f=function(e){var t=e.title,n=void 0===t?"Gensi":t,a=e.children;Object(c.a)(e,["title","children"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,n),o.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),o.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"})),o.a.createElement(d,null),a)},p=n(47),h=n(16),g=n(35);function v(){var e=Object(l.a)(['\n  display: block;\n  padding: 15px 30px;\n\n  & .temperature-content.active {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    & .content-loader-temperature {\n      display: "flex";\n      justify-content: flex-start;\n      align-items: center;\n      & .label {\n        display: inline-flex;\n        transform: translateY(-6px);\n        margin-left: 15px;\n        font-weight: bold;\n      }\n    }\n  }\n\n  & .temp {\n    pointer-events: none;\n  }\n\n  & .success {\n    background-color: #b3ffca;\n    border-radius: 3px;\n  }\n\n  & .warning {\n    background-color: #fff2b3;\n    border-radius: 3px;\n  }\n\n  & .danger {\n    background-color: #ffb3b3;\n    border-radius: 3px;\n  }\n']);return v=function(){return e},e}function b(){var e=Object(l.a)(["\n  background-color: #394fe4;\n  width: 100%;\n  min-height: 70px;\n  display: flex;\n  padding: 10px 15px;\n  align-items: center;\n  justify-content: left;\n  & .logo {\n    width: 70px;\n    margin-right: 15px;\n  }\n  & .title {\n    color: #ffffff;\n    font-size: 1.7em;\n    margin: 0;\n  }\n"]);return b=function(){return e},e}function y(){var e=Object(l.a)(["\n  background-color: white;\n"]);return y=function(){return e},e}function E(){var e=Object(l.a)(["\n  background-color: blue;\n"]);return E=function(){return e},e}function k(){var e=Object(l.a)(['\n  .Mui-disabled.MuiInputBase-input {\n    background-color: #efefef;\n    color: #555555;\n  }\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  min-height: 100vh;\n  background-image: url("/img/covid-bg.svg");\n  background-color: #4156fa;\n  background-repeat: repeat;\n  background-position: center;\n  background-size: cover;\n  & .container.custom {\n    max-width: 600px;\n    box-shadow: 0px 0px 3px 3px #293aad;\n    padding: 0px;\n    background-color: #ffffff;\n  }\n']);return k=function(){return e},e}var x=s.b.div(k()),O=(s.b.div(E()),s.b.div(y()),s.b.div(b())),j=s.b.div(v()),w=n(189),N=n(187),S=n(190),C=n(191),W=n(185),U=n(186),z=n(188),I=n(192),_=n(12),L=n(17),D=n(88),T=function(){function e(t,n){Object(_.a)(this,e),this.collection=t,this.config=n}return Object(L.a)(e,[{key:"getURL",value:function(e){return"".concat(this.config.apisURL,"/").concat(this.config.prefix,"/").concat(e)}},{key:"getHeaders",value:function(){return{"Content-Type":"application/json","Array-Wheres":JSON.stringify(Object(D.get)(this.config,"arrayWheres",[]))}}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;throw new Error(e.statusText)}},{key:"parseJSON",value:function(e){return e.json()}},{key:"request",value:function(e){var t=this,n=e.url,a=e.data,o=void 0===a?null:a,r=e.method,i=void 0===r?"GET":r;return new Promise((function(e,a){var r={headers:t.getHeaders(),method:i,body:o?JSON.stringify(o):null};fetch(n,r).then(t.checkStatus).then((function(n){e(t.parseJSON(n))})).catch(a)}))}},{key:"get",value:function(){var e=this.getURL(this.collection);return this.request({url:e})}},{key:"update",value:function(e,t){var n=this.getURL(this.collection);return this.request({url:"".concat(n,"/").concat(t),method:"PUT",data:e})}},{key:"delete",value:function(e){var t=this.getURL(this.collection);return this.request({url:"".concat(t,"/").concat(e),method:"DELETE"})}},{key:"add",value:function(e){var t=this.getURL(this.collection);return this.request({url:"".concat(t),method:"POST",data:e})}}]),e}(),R="AND",M="OR",q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(this,e),this.collection=t,this.config=Object(h.a)({},n),this.config.arrayWheres=[],this}return Object(L.a)(e,[{key:"get",value:function(){var e=new T(this.collection,this.config,this.arrayWheres).get(this.arrayWheres);return e.onSnapshot=function(){},e}},{key:"where",value:function(e,t,n){return this.config.arrayWheres.push({field:e,condition:t,value:n,type:R}),this}},{key:"orWhere",value:function(e,t,n){return this.config.arrayWheres.push({field:e,condition:t,value:n,type:M}),this}},{key:"findById",value:function(e){return this.doc(e)}},{key:"doc",value:function(e){var t=this;return{set:function(n){return new T(t.collection,t.config).update(n,e)},delete:function(){return new T(t.collection,t.config).delete(e)}}}},{key:"set",value:function(e){new T(this.collection,this.config).set()}},{key:"limit",value:function(){}},{key:"groupBy",value:function(){}},{key:"find",value:function(){}},{key:"add",value:function(e){return new T(this.collection,this.config).add(e)}},{key:"update",value:function(e){return this.doc(e)}},{key:"delete",value:function(e){this.doc(e)}}]),e}(),B=function(){function e(t){Object(_.a)(this,e),this.config=t}return Object(L.a)(e,[{key:"collection",value:function(e){if("string"!==typeof e)throw new Error("collection param must be string type.");return new q(e,this.config)}}]),e}(),A=n(89),P=n.n(A),F=null,H=function(e){return F=P()(e)},J=function(e){F.emit("message",e)},G=function(e){F.on("message",(function(t){"function"==typeof e&&e(t)}))},V=new(function(){function e(t){Object(_.a)(this,e),this.url=t}return Object(L.a)(e,[{key:"initializeApp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.config=e,this.config.socket=H(e.socketURL),this.config.sendMessage=J,this.config.onMessage=G}},{key:"database",value:function(){return new B(this.config)}},{key:"socket",value:function(){var e=this;return{sendMessage:function(t){e.config.sendMessage(t)},onMessage:function(t){e.config.onMessage(t)}}}}]),e}()),Y=n(59),K=n(60),Q=n.n(K),Z=n(90),$=n(40),X=n.n($),ee=function e(t){var n=this;Object(_.a)(this,e),this.getListHealthEntities=function(){return n.db.collection("health_entities").get()},this.addUser=function(e){var t=e.temperatura,a=e.documento,o=e.nombres,r=e.apellidos,i=e.eps,c=e.telefono,l=e.rh,s=e.fecha_nacimiento,u=e.tipo;return n.db.collection("user").add({temperatura:t,documento:a,nombres:o,apellidos:r,eps:i,rh:l,fecha_nacimiento:s,telefono:c,tipo:u})},this.getUserByDocument=function(e){return n.db.collection("user").where("documento","=",e).get()},this.getIndexData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length>e?t[e]:"Indefinido"},this.validForm=function(e){var t=e.documento,n=e.telefono,a=e.eps,o=e.tipo,r=e.sintomas;return"string"!==typeof n||""==n.trim()?{res:!1,message:"Por favor ingrese su tel\xe9fono."}:"string"!==typeof a||""==a.trim()?{res:!1,message:"Por favor seleccione su eps."}:"string"!==typeof o||""==o.trim()?{res:!1,message:"Por favor seleccione el tipo de usuario."}:"string"!==typeof r||""==r.trim()?{res:!1,message:"Por favor seleccione su estado/s\xedntomas."}:"string"!==typeof t||""==t.trim()?{res:!1,message:"No hemos detectado la lectura de su documento , por favor realice la lectura nuevamente."}:{res:!0}},this.sendForm=function(e,t,a,o){var r=n.validForm(e);if(r.res){var i=e.documento,c=e.sintomas;n.getUserByDocument(i).then(function(){var r=Object(Z.a)(Q.a.mark((function r(l){var s;return Q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=null,!(l.code>0)){r.next=8;break}return r.next=4,n.updateUser(l.data[0].id,e);case 4:(s=r.sent).code>0&&(s=l.data[0]),r.next=16;break;case 8:return r.next=10,n.addUser(e);case 10:if(!((s=r.sent).code>0)){r.next=16;break}return r.next=14,n.getUserByDocument(i);case 14:s=(s=r.sent).code>0?s.data[0]:null;case 16:if(!s){r.next=23;break}return r.next=19,n.addHistory(s,c,a,t);case 19:r.sent.code>0?X.a.fire({position:"center",icon:"success",title:"Se ha registrado el historial correctamente.",showConfirmButton:!1,timer:2e3}):X.a.fire({position:"center",icon:"error",title:"Lo sentimos, no se pudo registrar el historial.",showConfirmButton:!1,timer:2e3}),r.next=24;break;case 23:X.a.fire("Error","Lo sentimos, no pudimos enviar la informaci\xf3n.","error");case 24:"function"===typeof o&&o(s);case 25:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}else X.a.fire("Complete el formulario",r.message,"error")},this.updateUser=function(e,t){var a=t.temperatura,o=t.documento,r=t.nombres,i=t.apellidos,c=t.eps,l=t.telefono,s=t.rh,u=t.fecha_nacimiento,d=t.tipo;return n.db.collection("user").update(e).set({temperatura:a,documento:o,nombres:r,apellidos:i,eps:c,telefono:l,rh:s,fecha_nacimiento:u,tipo:d})},this.addHistory=function(e,t,a,o){return n.db.collection("history").add({id_user:e.id,documento:e.documento,temperatura:o,sintomas:t,dispositivo:a})},this.db=t},te="WELCOME",ne="SET_GROUP",ae="GET_TEMPERATURE",oe=function(){var e=function(e){var t={},n=document.createElement("a");n.href=e;for(var a=n.search.substring(1).split("&"),o=0;o<a.length;o++){var r=a[o].split("=");t[r[0]]=decodeURIComponent(r[1])}return t}(window.location.href).device;return e||1},re=function(){var e=V.socket(),t=null,n=Object(a.useState)({documento:"",nombres:"",apellidos:"",eps:"",telefono:"",tipo:"",sintomas:"",fecha_nacimiento:"",rh:""}),r=Object(g.a)(n,2),i=r[0],c=r[1],l=Object(a.useState)(0),s=Object(g.a)(l,2),u=s[0],d=s[1],m=Object(a.useState)([]),f=Object(g.a)(m,2),v=f[0],b=f[1],y=Object(a.useState)(!1),E=Object(g.a)(y,2),k=E[0],_=E[1],L=Object(a.useState)(""),D=Object(g.a)(L,2),T=D[0],R=D[1];Object(a.useEffect)((function(){P(),M()}),[]);var M=function(){var e=["telefono","eps","tipo","sintomas"];document.querySelector("body").addEventListener("keyup",(function(t){var n=t.target.name;e.includes(n)||(R(T+t.key),13!==t.keyCode&&13!==t.which||(q(T),R("")))}))},q=function(n){var a=n.replace(/\Shift/g,"").split("Tab");try{var o={type:ae,data:{documento:t.getIndexData(0,a),nombres:"".concat(t.getIndexData(3,a)," ").concat(t.getIndexData(4,a)).toUpperCase(),apellidos:"".concat(t.getIndexData(1,a)," ").concat(t.getIndexData(2,a)),eps:"",telefono:"",tipo:"",sintomas:"",fecha_nacimiento:t.getIndexData(6,a),rh:t.getIndexData(7,a).replace("Enter","")}};_(!0),e.sendMessage(o),t.getUserByDocument(o.data.documento).then((function(e){e.code>0?c(Object(h.a)(Object(h.a)({},o.data),e.data[0])):c(Object(h.a)(Object(h.a)({},a),o.data))}))}catch(r){console.error("Error al parcear el objeto:",r)}},B=function(e){var t=e.target,n=t.name,a=t.value;c(Object(h.a)(Object(h.a)({},i),{},Object(p.a)({},n,a)))},A=function(t){if(t.type===te)e.sendMessage({type:ne,dispositivo:oe()});else if(t.type===ae){if(_(!1),!t.temperature)return;d(t.temperature)}},P=function(){V.initializeApp({apisURL:Y.apiurl,socketURL:Y.socketurl,prefix:"api"}),(t=new ee(V.database())).getListHealthEntities().then((function(e){e.code>0&&b(e.data)})),e.onMessage(A)},F=function(){(t=new ee(V.database())).sendForm(i,u,oe(),(function(){c({documento:"",nombres:"",apellidos:"",eps:"",telefono:"",tipo:"",sintomas:"",fecha_nacimiento:"",rh:""}),d(0)}))};return o.a.createElement(x,null,o.a.createElement("div",{className:"container custom"},o.a.createElement(O,null,o.a.createElement("img",{src:"".concat(".","/img/covid-logo.svg"),className:"logo animate__animated animate__bounce"}),o.a.createElement("h1",{className:"title"},"COVID-19 - Analizer")),o.a.createElement(j,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 pb-3"},o.a.createElement(z.a,{severity:"info"},o.a.createElement(I.a,null,"Informaci\xf3n"),"Esta informaci\xf3n solo ser\xe1 usada para efectos de cerco epidemiol\xf3gico por ",o.a.createElement("strong",null,"Covid-19"),".")),o.a.createElement("div",{className:"col-md-4 temperature-content ".concat(k?"active":"")},k?o.a.createElement("div",{className:"content-loader-temperature"},o.a.createElement("div",{className:"spinner-border text-primary",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")),o.a.createElement("span",{className:"label"},"Leyendo...")):o.a.createElement(w.a,{label:"Temperatura",id:"temperatura",margin:"normal",name:"temperatura",value:u,fullWidth:!0,size:"small",className:u<=37?"success temp":u>=38?"danger temp":u>37?"warning temp":"temp",variant:"outlined"})),o.a.createElement("div",{className:"col-md-8"},o.a.createElement(w.a,{label:"Documento",id:"documento",name:"documento",margin:"normal",fullWidth:!0,onChange:B,size:"small",value:i.documento,required:!0,disabled:!0,variant:"outlined"})),o.a.createElement("div",{className:"col-6"},o.a.createElement(w.a,{label:"Nombres",id:"nombres",name:"nombres",margin:"normal",fullWidth:!0,value:i.nombres,size:"small",disabled:!0,onChange:B,variant:"outlined"})),o.a.createElement("div",{className:"col-6"},o.a.createElement(w.a,{label:"Apellidos",id:"apellidos",name:"apellidos",disabled:!0,value:i.apellidos,margin:"normal",fullWidth:!0,onChange:B,size:"small",variant:"outlined"})),o.a.createElement("div",{className:"col-6"},o.a.createElement(w.a,{label:"Fecha Nacimiento",id:"fecha_nacimiento",name:"fecha_nacimiento",value:i.fecha_nacimiento,onChange:B,margin:"normal",fullWidth:!0,size:"small",disabled:!0,variant:"outlined"})),o.a.createElement("div",{className:"col-6"},o.a.createElement(w.a,{label:"RH",id:"rh",name:"rh",value:i.rh,onChange:B,margin:"normal",fullWidth:!0,size:"small",disabled:!0,variant:"outlined"})),o.a.createElement("div",{className:"col-6"},o.a.createElement(w.a,{label:"Tel\xe9fono",id:"telefono",name:"telefono",value:i.telefono,onChange:B,margin:"normal",fullWidth:!0,required:!0,size:"small",variant:"outlined"})),o.a.createElement("div",{className:"col-6 pt-3"},o.a.createElement(W.a,{variant:"outlined",fullWidth:!0,name:"eps",size:"small",required:!0},o.a.createElement(S.a,{id:"labelEps"},"Eps"),o.a.createElement(N.a,{labelId:"labelEps",id:"eps",name:"eps",fullWidth:!0,size:"small",value:i.eps,onChange:B,label:"Eps"},v.map((function(e){return o.a.createElement(C.a,{key:e.id,value:e.nit},e.comercial_name)}))))),o.a.createElement("div",{className:"col-6 pt-3"},o.a.createElement(W.a,{variant:"outlined",name:"tipo",fullWidth:!0,size:"small",required:!0},o.a.createElement(S.a,{id:"labelTipo"},"Tipo"),o.a.createElement(N.a,{labelId:"labelTipo",id:"tipo",name:"tipo",fullWidth:!0,size:"small",onChange:B,value:i.tipo,label:"Tipo"},o.a.createElement(C.a,{value:""},o.a.createElement("em",null,"Ninguno")),o.a.createElement(C.a,{value:"E"},"Empleado"),o.a.createElement(C.a,{value:"V"},"Visitante")))),o.a.createElement("div",{className:"col-6 pt-3"},o.a.createElement(W.a,{variant:"outlined",fullWidth:!0,name:"sintomas",size:"small",required:!0},o.a.createElement(S.a,{id:"labelSintomas"},"S\xedntomas"),o.a.createElement(N.a,{labelId:"labelSintomas",id:"sintomas",name:"sintomas",fullWidth:!0,size:"small",value:i.sintomas,onChange:B,label:"S\xedntomas"},o.a.createElement(C.a,{value:"S"},"Con S\xedntomas"),o.a.createElement(C.a,{value:"N"},"S\xedn S\xedntomas")))),o.a.createElement("div",{className:"col-12 pt-3 text-right"},o.a.createElement(U.a,{variant:"contained",size:"large",color:"default",className:"mr-3",onClick:function(){d(0),c({documento:"",nombres:"",apellidos:"",eps:"",telefono:"",tipo:"",sintomas:"",fecha_nacimiento:"",rh:""})}},"Limpiar"),o.a.createElement(U.a,{variant:"contained",size:"large",color:"primary",onClick:F},"Enviar"))))))};var ie=function(e){return o.a.createElement(f,{title:"COVID-19 Analizer"},o.a.createElement(re,e))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e){e.exports=JSON.parse('{"apiurl":"http://vmi304306.contaboserver.net:82","socketurl":"http://localhost:3000"}')}},[[107,1,2]]]);
//# sourceMappingURL=main.c5a68119.chunk.js.map